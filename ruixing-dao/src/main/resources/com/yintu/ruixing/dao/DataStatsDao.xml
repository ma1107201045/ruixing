<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yintu.ruixing.dao.DataStatsDao">
    <!--查詢所有的车站数据-->

    <select id="findAll" resultType="com.yintu.ruixing.entity.DataStats">
     SELECT
		tlj.tlj_name,
		dwd.dwd_name,
		xd.xd_name,
		cz.cz_name,
		cz.id,
		cz.cz_ip,
		cz.cz_type,
		cz.cz_lasttime,
		cz.cz_open_stutrs
	FROM
		mro_chezhan cz,
		mro_dianwuduan dwd,
		mro_tieluju tlj,
		mro_xianduan xd
	WHERE
		tlj.id = dwd.tlj_id
		AND dwd.id = xd.dwd_id
		AND xd.id = cz.xd_id

    </select>

    <!--检查项分页查询-->

    <select id="getByPage" resultType="com.yintu.ruixing.entity.DataStats">
		SELECT
		tlj.tlj_name,
		dwd.dwd_name,
		xd.xd_name,
		cz.cz_name,
		cz.id,
		cz.cz_ip,
		cz.cz_type,
		cz.cz_lasttime,
		cz.cz_open_stutrs
	FROM
		mro_chezhan cz,
		mro_dianwuduan dwd,
		mro_tieluju tlj,
		mro_xianduan xd
	WHERE
		tlj.id = dwd.tlj_id
		AND dwd.id = xd.dwd_id
		AND xd.id = cz.xd_id

	</select>

    <!--查询铁路局-->
    <select id="findTieLuJuById" parameterType="Long" resultType="com.yintu.ruixing.entity.TieLuJuEntity">
		select tlj_name,tlj_miaoshu from mro_tieluju where id=#{id}
	</select>
    <!--查询电务段-->
    <select id="findDianWuDuanById" resultType="com.yintu.ruixing.entity.DianWuDuanEntity">

    </select>

    <!--新增铁路局-->
    <insert id="addTieLuJU" parameterType="com.yintu.ruixing.entity.TieLuJuEntity">
		insert into mro_tieluju (tlj_name,tlj_id,tlj_miaoshu)
		values
		(#{tlj_name},#{tlj_id},#{tlj_miaoshu})
	</insert>
    <!--通过id修改铁路局信息-->
    <update id="editTieLuJuById" parameterType="com.yintu.ruixing.entity.TieLuJuEntity">
        update mro_tieluju
        <set>
            <if test="tlj_name !=null">
                tlj_name=#{tlj_name}
            </if>
            <if test="tlj_miaoshu !=null">
                tlj_miaoshu=#{tlj_miaoshu}
            </if>
        </set>
    </update>
	<!--根据id删除铁路局-->
	<delete id="delTieLuJu" parameterType="long">
		delete from mro_tieluju where id=#{id}
	</delete>
	<!--新增电务段-->
	<insert id="addDianWuDuan" parameterType="com.yintu.ruixing.entity.DianWuDuanEntity">
		insert into mro_dianwuduan(dwd_name,dwd_id,tlj_id,dwd_miaoshu)
		values
		(#{dwd_name},#{dwd_id},#{tlj_id},#{dwd_miaoshu})
	</insert>
	<!--修改电务段信息-->
	<update id="editDianWuDuan" parameterType="com.yintu.ruixing.entity.DianWuDuanEntity">
		update mro_dianwuduan
		<set>
			<if test="dwd_name !=null">
				dwd_name=#{dwd_name}
			</if>
			<if test="tlj_id !=null">
				tlj_id=#{tlj_id}
			</if>
			<if test="dwd_miaoshu !=null">
				dwd_miaoshu=#{dwd_miaoshu}
			</if>
		</set>
		where
		id=#{id}
	</update>
	<!--删除电务段-->
	<delete id="delDianWuDuan" parameterType="long">
		delete from mro_dianwuduan where id=#{id}
	</delete>
	<!--新增线段-->
	<insert id="addXianDuan" parameterType="com.yintu.ruixing.entity.XianDuanEntity" >
		insert into mro_xianduan(xd_name,xd_id,dwd_id,xd_miaoshu)
		values
		(#{xd_name},#{xd_id},#{dwd_id},#{xd_miaoshu})
	</insert>
	<!--删除线段-->
	<delete id="delXianDuan" parameterType="long">
		delete from mro_xianduan where id=#{id}
	</delete>
</mapper>